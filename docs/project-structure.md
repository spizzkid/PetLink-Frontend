# PetLink é¡¹ç›®ç»“æ„

## ğŸ“ é¡¹ç›®ç›®å½•ç»“æ„

```
petlink/
â”œâ”€â”€ docs/                           # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ DEPLOYMENT.md              # äº‘ç«¯éƒ¨ç½²æŒ‡å—
â”‚   â”œâ”€â”€ database-design.md         # æ•°æ®åº“è®¾è®¡æ–‡æ¡£
â”‚   â”œâ”€â”€ file-structure.md          # æ–‡ä»¶ç»“æ„è¯´æ˜ï¼ˆå·²åºŸå¼ƒï¼‰
â”‚   â”œâ”€â”€ improvements.md            # æ”¹è¿›å»ºè®®æ–‡æ¡£
â”‚   â”œâ”€â”€ project-instructions.md    # é¡¹ç›®å¼€å‘æŒ‡ä»¤
â”‚   â””â”€â”€ project-structure.md      # é¡¹ç›®ç»“æ„è¯´æ˜ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”œâ”€â”€ scripts/                        # éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ deploy.sh                   # Linux/Mac éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ deploy.bat                  # Windows éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ test-deployment.sh          # Linux/Mac éƒ¨ç½²éªŒè¯è„šæœ¬
â”‚   â””â”€â”€ test-deployment.bat         # Windows éƒ¨ç½²éªŒè¯è„šæœ¬
â”œâ”€â”€ server/                         # äº‘ç«¯åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app.ts                  # Expressåº”ç”¨ä¸»æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ index.ts                # æœåŠ¡å™¨å…¥å£æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ routes/                 # APIè·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts             # è®¤è¯ç›¸å…³è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ clients.ts          # å®¢æˆ·ç®¡ç†è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ pets.ts             # å® ç‰©ç®¡ç†è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ healthChecks.ts     # å¥åº·æ£€æŸ¥è·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ aiReports.ts        # AIæŠ¥å‘Šè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ middleware/             # ä¸­é—´ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts             # è®¤è¯ä¸­é—´ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ errorHandler.ts     # é”™è¯¯å¤„ç†ä¸­é—´ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ rateLimiter.ts      # é™æµä¸­é—´ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ upload.ts           # æ–‡ä»¶ä¸Šä¼ ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ lib/                    # å·¥å…·åº“
â”‚   â”‚   â”‚   â””â”€â”€ prisma.ts           # Prismaå®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ services/               # ä¸šåŠ¡æœåŠ¡
â”‚   â”‚       â””â”€â”€ aiService.ts        # AIåˆ†ææœåŠ¡
â”‚   â”œâ”€â”€ prisma/
â”‚   â”‚   â””â”€â”€ schema.prisma           # æ•°æ®åº“æ¨¡å¼å®šä¹‰
â”‚   â”œâ”€â”€ uploads/                    # æ–‡ä»¶ä¸Šä¼ ç›®å½•
â”‚   â”œâ”€â”€ package.json                # åç«¯ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ tsconfig.json               # TypeScripté…ç½®
â”‚   â”œâ”€â”€ Dockerfile                  # Dockeré•œåƒé…ç½®
â”‚   â”œâ”€â”€ docker-compose.yml          # Docker Composeé…ç½®
â”‚   â””â”€â”€ .env.example               # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ src/                           # æ¡Œé¢åº”ç”¨æºä»£ç 
â”‚   â”œâ”€â”€ main/                      # ä¸»è¿›ç¨‹
â”‚   â”‚   â”œâ”€â”€ database.ts            # æœ¬åœ°æ•°æ®åº“ï¼ˆäº‘ç«¯ç‰ˆæœ¬å·²å¼ƒç”¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ index.ts               # ä¸»è¿›ç¨‹å…¥å£
â”‚   â”‚   â”œâ”€â”€ services.ts            # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â”‚   â””â”€â”€ storage.ts             # æ•°æ®å­˜å‚¨å·¥å…·
â”‚   â”œâ”€â”€ preload/                   # é¢„åŠ è½½è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ index.d.ts             # ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts               # é¢„åŠ è½½è„šæœ¬å…¥å£
â”‚   â”œâ”€â”€ renderer/                  # æ¸²æŸ“è¿›ç¨‹
â”‚   â”‚   â”œâ”€â”€ index.html             # HTMLæ¨¡æ¿
â”‚   â”‚   â””â”€â”€ src/                   # æ¸²æŸ“è¿›ç¨‹æºç 
â”‚   â”‚       â”œâ”€â”€ App.tsx            # åº”ç”¨æ ¹ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ main.tsx           # æ¸²æŸ“è¿›ç¨‹å…¥å£
â”‚   â”‚       â”œâ”€â”€ components/        # Reactç»„ä»¶
â”‚   â”‚       â”‚   â”œâ”€â”€ LoadingState.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚       â”‚   â””â”€â”€ Versions.tsx
â”‚   â”‚       â”œâ”€â”€ pages/             # é¡µé¢ç»„ä»¶
â”‚   â”‚       â”‚   â”œâ”€â”€ Auth.tsx              # ç™»å½•é¡µé¢ï¼ˆæ–°å¢ï¼‰
â”‚   â”‚       â”‚   â”œâ”€â”€ AiChat.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ AiReport.tsx          # AIæŠ¥å‘Šï¼ˆå·²æ›´æ–°ï¼‰
â”‚   â”‚       â”‚   â”œâ”€â”€ ArchiveManagementCenter.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ CheckHistory.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ ClientManagement.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ Dashboard.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ DataStatisticsCenter.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ HealthCheck.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ HealthCheckManagement.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ HealthReportCenter.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ Home.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ PetManagement.tsx
â”‚   â”‚       â”‚   â””â”€â”€ Settings.tsx
â”‚   â”‚       â”œâ”€â”€ assets/            # é™æ€èµ„æº
â”‚   â”‚       â”œâ”€â”€ contexts/          # React Contextï¼ˆæ–°å¢ï¼‰
â”‚   â”‚       â”‚   â””â”€â”€ AuthContext.tsx    # è®¤è¯ä¸Šä¸‹æ–‡
â”‚   â”‚       â””â”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ shared/                    # å…±äº«ä»£ç 
â”‚       â”œâ”€â”€ schemas/               # ZodéªŒè¯æ¨¡å¼
â”‚       â”‚   â”œâ”€â”€ api.ts            # APIç›¸å…³Schema
â”‚       â”‚   â”œâ”€â”€ base.ts           # åŸºç¡€Schema
â”‚       â”‚   â”œâ”€â”€ entities.ts       # å®ä½“Schema
â”‚       â”‚   â””â”€â”€ index.ts          # ç»Ÿä¸€å¯¼å‡º
â”‚       â”œâ”€â”€ stores/                # ZustandçŠ¶æ€ç®¡ç†
â”‚       â”‚   â”œâ”€â”€ clientStore.ts
â”‚       â”‚   â”œâ”€â”€ healthCheckStore.ts
â”‚       â”‚   â”œâ”€â”€ index.ts
â”‚       â”‚   â”œâ”€â”€ petStore.ts
â”‚       â”‚   â””â”€â”€ uiStore.ts
â”‚       â”œâ”€â”€ types/                 # TypeScriptç±»å‹
â”‚       â”‚   â””â”€â”€ index.ts
â”‚       â””â”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚           â””â”€â”€ errorHandler.ts
â”œâ”€â”€ out/                           # æ„å»ºè¾“å‡º
â”œâ”€â”€ resources/                     # åº”ç”¨èµ„æº
â””â”€â”€ é…ç½®æ–‡ä»¶...
```

## ğŸ—ï¸ æ¶æ„è¯´æ˜

### è¿›ç¨‹æ¶æ„

- **Main Process** (`src/main/`) - è´Ÿè´£åº”ç”¨ç”Ÿå‘½å‘¨æœŸã€æ•°æ®åº“æ“ä½œã€ç³»ç»ŸAPIè°ƒç”¨
- **Renderer Process** (`src/renderer/src/`) - è´Ÿè´£UIæ¸²æŸ“å’Œç”¨æˆ·äº¤äº’
- **Preload** (`src/preload/`) - æä¾›å®‰å…¨çš„APIæ¡¥æ¥
- **Shared** (`src/shared/`) - å¤šè¿›ç¨‹å…±äº«çš„ä»£ç å’Œç±»å‹å®šä¹‰

### çŠ¶æ€ç®¡ç†

ä½¿ç”¨ **Zustand** è¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼Œä¸»è¦storeåŒ…æ‹¬ï¼š

- `clientStore` - å®¢æˆ·ç®¡ç†çŠ¶æ€
- `petStore` - å® ç‰©ç®¡ç†çŠ¶æ€
- `healthCheckStore` - å¥åº·æ£€æŸ¥çŠ¶æ€
- `uiStore` - UIçŠ¶æ€ç®¡ç†

### æ•°æ®éªŒè¯

ä½¿ç”¨ **Zod** è¿›è¡Œæ•°æ®éªŒè¯ï¼ŒåŒ…æ‹¬ï¼š

- å®ä½“éªŒè¯æ¨¡å¼ (`entities.ts`)
- APIè¯·æ±‚/å“åº”æ¨¡å¼ (`api.ts`)
- åŸºç¡€ç±»å‹å®šä¹‰ (`base.ts`)

### è·¯å¾„åˆ«å

- `@renderer` â†’ `src/renderer/src`
- `@shared` â†’ `src/shared`

## ğŸ“‹ åŠŸèƒ½æ¨¡å—

### æ ¸å¿ƒåŠŸèƒ½

1. **å®¢æˆ·ç®¡ç†** - æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤ã€æœç´¢å®¢æˆ·
2. **å® ç‰©ç®¡ç†** - å® ç‰©æ¡£æ¡ˆç®¡ç†
3. **å¥åº·æ£€æŸ¥** - å¥åº·æ£€æµ‹è®°å½•å’Œç®¡ç†
4. **AIæŠ¥å‘Š** - AIåˆ†ææŠ¥å‘Šç”Ÿæˆ
5. **æ•°æ®ç»Ÿè®¡** - ä¸šåŠ¡æ•°æ®ç»Ÿè®¡åˆ†æ

### é¡µé¢ç»“æ„

- `Home.tsx` - é¦–é¡µ
- `Dashboard.tsx` - ä»ªè¡¨æ¿
- `ClientManagement.tsx` - å®¢æˆ·ç®¡ç†
- `PetManagement.tsx` - å® ç‰©ç®¡ç†
- `HealthCheck.tsx` - å¥åº·æ£€æµ‹
- `HealthCheckManagement.tsx` - å¥åº·æ£€æŸ¥ç®¡ç†
- `HealthReportCenter.tsx` - å¥åº·æŠ¥å‘Šä¸­å¿ƒ
- `ArchiveManagementCenter.tsx` - æ¡£æ¡ˆç®¡ç†ä¸­å¿ƒ
- `DataStatisticsCenter.tsx` - æ•°æ®ç»Ÿè®¡ä¸­å¿ƒ
- `AiChat.tsx` - AIåŠ©æ‰‹
- `AiReport.tsx` - AIæŠ¥å‘Š

## ğŸ”§ å¼€å‘è§„èŒƒ

### æ–‡ä»¶å‘½å

- ç»„ä»¶æ–‡ä»¶ä½¿ç”¨å¤§é©¼å³°å‘½åï¼š`Sidebar.tsx`
- é¡µé¢æ–‡ä»¶ä½¿ç”¨å¤§é©¼å³°å‘½åï¼š`ClientManagement.tsx`
- å·¥å…·æ–‡ä»¶ä½¿ç”¨å°é©¼å³°å‘½åï¼š`errorHandler.ts`

### å¯¼å…¥è§„èŒƒ

- ä¼˜å…ˆä½¿ç”¨è·¯å¾„åˆ«åï¼š`@shared/stores/clientStore`
- ç›¸å¯¹è·¯å¾„ç”¨äºåŒç›®å½•å¯¼å…¥ï¼š`./components/Sidebar`
- å…±äº«ä»£ç ç»Ÿä¸€ä»`@shared`å¯¼å…¥

### ç»„ä»¶ç»„ç»‡

- å¸ƒå±€ç»„ä»¶æ”¾åœ¨`components/`ç›®å½•
- é¡µé¢ç»„ä»¶æ”¾åœ¨`pages/`ç›®å½•
- å¯å¤ç”¨çš„UIç»„ä»¶è€ƒè™‘æŒ‰åŠŸèƒ½åˆ†ç±»

## ğŸš€ æ„å»ºå’Œéƒ¨ç½²

### å¼€å‘ç¯å¢ƒ

```bash
yarn dev        # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```

### ç”Ÿäº§æ„å»º

```bash
yarn build      # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```

### ä»£ç æ£€æŸ¥

```bash
yarn lint       # ä»£ç è´¨é‡æ£€æŸ¥
yarn typecheck  # TypeScriptç±»å‹æ£€æŸ¥
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ä¸è¦åœ¨** `src/renderer/` æ ¹ç›®å½•ä¸‹åˆ›å»ºç»„ä»¶æ–‡ä»¶
2. **æ‰€æœ‰æ¸²æŸ“è¿›ç¨‹ä»£ç ** åº”è¯¥æ”¾åœ¨ `src/renderer/src/` ç›®å½•ä¸‹
3. **å…±äº«ä»£ç ** æ”¾åœ¨ `src/shared/` ç›®å½•ä¸‹
4. **æ–‡æ¡£æ–‡ä»¶** ç»Ÿä¸€æ”¾åœ¨ `docs/` ç›®å½•ä¸‹
5. **ä½¿ç”¨è·¯å¾„åˆ«å** è€Œä¸æ˜¯ç›¸å¯¹è·¯å¾„å¯¼å…¥å…±äº«ä»£ç 
